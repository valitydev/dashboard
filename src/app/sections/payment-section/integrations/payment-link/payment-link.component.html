<dsh-card
    fxLayout="column"
    fxLayoutGap="24px"
    *transloco="let t; scope: 'payment-section'; read: 'paymentSection.paymentLink'"
>
    <dsh-create-invoice-or-invoice-template
        *ngIf="(currentStep$ | async) === step.InvoiceTemplate"
        (next)="nextInvoiceOrInvoiceTemplate($event)"
    ></dsh-create-invoice-or-invoice-template>
    <div fxLayout="column" fxLayoutGap="32px" *ngIf="(currentStep$ | async) === step.PaymentLink">
        <ng-container>
            <h1 class="dsh-headline">
                {{ t('title') }}
            </h1>
            <div fxLayout="column" fxLayoutGap="24px">
                <dsh-create-payment-link-form
                    [formControl]="formControl"
                    [paymentMethods]="paymentMethods$ | async"
                    [paymentLink]="paymentLink$ | async"
                ></dsh-create-payment-link-form>
                <dsh-actions>
                    <button
                        dsh-text-button
                        color="accent"
                        (click)="currentStep$.next(step.InvoiceTemplate)"
                        [disabled]="!!(progress$ | async)"
                    >
                        {{ t('back') }}
                    </button>

                    <ng-container *ngIf="formControl.valid && !(paymentLink$ | async); else clearButton">
                        <button dsh-button color="accent" (click)="create()" [disabled]="!!(progress$ | async)">
                            {{ t('create') }}
                        </button>
                    </ng-container>
                    <ng-template #clearButton>
                        <button
                            dsh-text-button
                            color="accent"
                            (click)="formControl.reset()"
                            [disabled]="!!(progress$ | async)"
                        >
                            {{ t('clearForm') }}
                        </button>
                    </ng-template>
                </dsh-actions>
            </div>
        </ng-container>
    </div>
</dsh-card>
